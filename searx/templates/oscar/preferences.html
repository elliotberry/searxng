{% extends "oscar/base.html" %}
{% block content %}
<div>

    <h1>{{ _('Preferences') }}</h1>
    <form method="post" action="{{ url_for('preferences') }}" id="search_form">

    <!-- Nav tabs -->
    <ul class="nav nav-tabs" role="tablist" style="margin-bottom:20px;">
      <li class="active"><a href="#tab_general" role="tab" data-toggle="tab">{{ _('General') }}</a></li>
      <li><a href="#tab_engine" role="tab" data-toggle="tab">{{ _('Engines') }}</a></li>
    </ul>

    <!-- Tab panes -->
    <div class="tab-content">
        <div class="tab-pane active" id="tab_general">
            <fieldset>
                <legend>{{ _('Default categories') }}</legend>
                <p>
                {% include 'default/categories.html' %}
                </p>
            </fieldset>

            <fieldset>
            <div class="container-fluid">
                <div class="row form-group">
                    <label class="col-sm-3 col-md-2">{{ _('Search language') }}</label>
                    <div class="col-sm-4 col-md-4">
                        <select class="form-control" name='language'>
                            <option value="all" {% if current_language == 'all' %}selected="selected"{% endif %}>{{ _('Automatic') }}</option>
                            {% for lang_id,lang_name,country_name in language_codes %}
                            <option value="{{ lang_id }}" {% if lang_id == current_language %}selected="selected"{% endif %}>{{ lang_name }} ({{ country_name }}) - {{ lang_id }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
                
                
                <div class="row form-group">
                    <label class="col-sm-3 col-md-2">{{ _('Interface language') }}</label>
                    <div class="col-sm-4 col-md-4">
                        <select class="form-control" name='locale'>
                            {% for locale_id,locale_name in locales.items() %}
                            <option value="{{ locale_id }}" {% if locale_id == current_locale %}selected="selected"{% endif %}>{{ locale_name }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
                <div class="row form-group">
                    <label class="col-sm-3 col-md-2">{{ _('Autocomplete') }}</label>
                    <div class="col-sm-4 col-md-4">
                        
                        <select class="form-control" name="autocomplete">
                            <option value=""> - </option>
                            {% for backend in autocomplete_backends %}
                            <option value="{{ backend }}" {% if backend == autocomplete %}selected="selected"{% endif %}>{{ backend }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <span class="col-sm-5 col-md-6 help-block">{{ _('Find stuff as you type') }}</span>
                </div>
                <div class="row form-group">
                    <label class="col-sm-3 col-md-2">{{ _('Method') }}</label>
                    <div class="col-sm-4 col-md-4">
                        <select class="form-control" name='method'>
                            <option value="POST" {% if method == 'POST' %}selected="selected"{% endif %}>POST</option>
                            <option value="GET" {% if method == 'GET' %}selected="selected"{% endif %}>GET</option>
                        </select>
                    </div>
                    <span class="col-sm-5 col-md-6 help-block">{{ _('Change how forms are submited, <a href="http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Request_methods" rel="external">learn more about request methods</a>') }}</span>
                </div>
                <div class="row form-group">
                    <label class="col-sm-3 col-md-2">{{ _('Themes') }}</label>
                    <div class="col-sm-4 col-md-4">
                        <select class="form-control" name="theme">
                            {% for name in themes %}
                            <option value="{{ name }}" {% if name == theme %}selected="selected"{% endif %}>{{ name }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <span class="col-sm-5 col-md-6 help-block">{{ _('Change searx layout') }}</span>
                </div>
            </div>
            </fieldset>
        </div>
        <div class="tab-pane" id="tab_engine">
            <fieldset>
            {% for (categ,search_engines) in categs %}
                <legend>{{ _(categ) }}</legend>
                <div class="container-fluid">
                {% for search_engine in search_engines %}
                    {% if not search_engine.private %}
                        <div class="row">
                            <div class="col-sm-4 col-md-4">{{ search_engine.name }} ({{ shortcuts[search_engine.name] }})</div>
                            <div class="col-sm-4 col-md-4">
                                <div class="checkbox">
                                <input type="checkbox" id="engine_{{ categ }}_{{ search_engine.name|replace(' ', '_') }}" name="engine_{{ search_engine.name }}"{% if search_engine.name in blocked_engines %} checked="checked"{% endif %} />
                                <label class="allow btn btn-success" for="engine_{{ categ }}_{{ search_engine.name|replace(' ', '_') }}">{{ _('Allow') }}</label>
                                <label class="deny btn btn-danger" for="engine_{{ categ }}_{{ search_engine.name|replace(' ', '_') }}">{{ _('Block') }}</label>
                                </div>
                            </div>
                        </div>
                    {% endif %}
                {% endfor %}
                </div>
            {% endfor %}   
            </fieldset>     
        </div>
    </div>

    <p class="text-muted" style="margin:20px 0;">{{ _('These settings are stored in your cookies, this allows us not to store this data about you.') }}
    <br />
    {{ _("These cookies serve your sole convenience, we don't use these cookies to track you.") }}
    </p>

    <input type="submit" class="btn btn-primary" value="{{ _('save') }}" />
	<a href="{{ url_for('index') }}"><div class="btn btn-default">{{ _('back') }}</div></a>
    </form>    
</div>
{% endblock %}
